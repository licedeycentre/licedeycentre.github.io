# Изменения в компоненте FAQ

## Дата: 21 октября 2025

### Цель

Упростить компонент FAQ, сделать его более единообразным и простым, сохранив плавные анимации.

## Что изменилось

### 1. Упрощён компонент React (`FAQAccordion.tsx`)

**Было:**

- Сложная логика с множественными refs для анимации высоты
- Ручное управление высотой через `style.height`
- Дополнительные эффекты для расчёта высоты контента
- Декоративная точка перед вопросом
- Символ `›` в качестве индикатора

**Стало:**

- Простая логика с одним состоянием `openIndex`
- CSS-анимации через `max-height` и `@keyframes`
- Использование иконки `ChevronDown` из `lucide-react`
- Убраны все refs и сложные эффекты
- Код сократился с ~100 до ~50 строк

### 2. Обновлены CSS стили

**Было:**

```css
.faq-list-compact
.faq-accordion-item
.faq-accordion-button
.faq-accordion-button-text::before (декоративная точка)
.faq-accordion-button::after (символ ›)
.faq-accordion-content (с динамической высотой)
.faq-accordion-body (с opacity и transform)
```

**Стало:**

```css
.faq-list
.faq-item
.faq-question
.faq-icon (ChevronDown иконка)
.faq-answer
@keyframes fadeIn (плавное появление)
```

### 3. Единообразие стилей

- Используется `max-height` для плавного раскрытия (вместо точного `height`)
- Стандартные CSS переменные для времени анимации
- Hover-эффекты упрощены и унифицированы
- Адаптивные стили для мобильных устройств обновлены

### 4. Анимации

**Сохранены:**

- Плавное открытие/закрытие (300-350мс)
- Вращение иконки (180deg)
- Fade-in эффект для текста ответа
- Hover-эффекты

**Улучшены:**

- Более предсказуемые анимации через `max-height`
- Keyframe-анимация для содержимого
- Меньше JavaScript, больше CSS

## Технические детали

### Структура компонента

```tsx
<div className="faq-list">
  <div className="faq-item">
    <button className="faq-question">
      <span>Вопрос</span>
      <ChevronDown className="faq-icon" />
    </button>
    <div className="faq-answer">
      <p>Ответ</p>
    </div>
  </div>
</div>
```

### Анимации

1. **Открытие/закрытие:**
   - `max-height: 0` → `max-height: 500px`
   - Transition: `var(--duration-3)` (~350ms)

2. **Иконка:**
   - `transform: rotate(0deg)` → `rotate(180deg)`
   - Transition: `var(--duration-2)` (~250ms)

3. **Содержимое:**
   - Keyframe `fadeIn` с opacity и translateY
   - Duration: `var(--duration-2)` (~250ms)

## Тестирование

Создан полный набор тестов (`FAQAccordion.test.tsx`):

- ✅ Рендеринг всех элементов
- ✅ Состояние по умолчанию (закрыто)
- ✅ Открытие по клику
- ✅ Закрытие по повторному клику
- ✅ Только один открыт одновременно
- ✅ CSS классы
- ✅ Aria-атрибуты
- ✅ Пустой массив

**Результат:** Все 68 тестов проекта проходят успешно ✅

## Преимущества

1. **Простота кода:** -50% строк кода
2. **Производительность:** Меньше JavaScript, больше CSS
3. **Поддержка:** Проще понять и модифицировать
4. **Надёжность:** Покрыто тестами
5. **Единообразие:** Соответствует общему стилю проекта
6. **Доступность:** Сохранены все ARIA-атрибуты

## Миграция

Не требуется! Компонент используется только на странице контактов, изменения обратно совместимы.

## Файлы изменены

- `src/components/FAQAccordion.tsx` - упрощён компонент
- `src/styles.css` - обновлены стили (строки ~2495-2571)
- `src/components/FAQAccordion.test.tsx` - новый файл с тестами
